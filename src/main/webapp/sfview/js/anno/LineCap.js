export default class LineCap{line;position;size;shape;sign;draws={none:function(ctx){},triangle:function(ctx){const line=this.line;const size=this.size;const sign=this.sign;const slope=line.slope;const[x,y]=line.getPoint(this.position);const[bx,by]=[x+size/2*Math.cos(slope),y+size/2*Math.sin(slope)];ctx.fillStyle=line.strokeStyle;ctx.moveTo(bx,by);ctx.lineTo(bx+sign*size*Math.cos(slope-Math.PI/6),by+sign*size*Math.sin(slope-Math.PI/6));ctx.lineTo(bx+sign*size*Math.cos(slope+Math.PI/6),by+sign*size*Math.sin(slope+Math.PI/6));ctx.fill()},diamond:function(ctx){const line=this.line;const size=this.size/2;const width=this.size/Math.SQRT2;const slope=line.slope;const[x,y]=line.getPoint(this.position);const[bx,by]=[x-size*Math.cos(slope),y-size*Math.sin(slope)];ctx.fillStyle=line.strokeStyle;ctx.moveTo(bx,by);ctx.lineTo(bx-width*Math.cos(slope-Math.PI*3/4),by-width*Math.sin(slope-Math.PI*3/4));ctx.lineTo(x+size*Math.cos(slope),y+size*Math.sin(slope));ctx.lineTo(bx-width*Math.cos(slope+Math.PI*3/4),by-width*Math.sin(slope+Math.PI*3/4));ctx.fill()},circle:function(ctx){const line=this.line;const radius=this.size/2;const[x,y]=line.getPoint(this.position);ctx.fillStyle=line.strokeStyle;ctx.moveTo(x+radius,y);ctx.ellipse(x,y,radius,radius,0,0,2*Math.PI);ctx.fill()},bracket:function(ctx){const line=this.line;const size=this.size;const sign=this.sign;const slope=line.slope;const[x,y]=line.getPoint(this.position);const[bx,by]=[x+size/2*Math.cos(slope),y+size/2*Math.sin(slope)];ctx.fillStyle=line.strokeStyle;ctx.moveTo(x,y);ctx.lineTo(bx+sign*size*Math.cos(slope-Math.PI/6),by+sign*size*Math.sin(slope-Math.PI/6));ctx.lineTo(bx,by);ctx.lineTo(bx+sign*size*Math.cos(slope+Math.PI/6),by+sign*size*Math.sin(slope+Math.PI/6));ctx.fill()}};draw;constructor(line,position,size=14,shape){this.line=line;this.position=position;this.sign=position=="head"?-1:1;this.shape=shape??(position=="head"?"triangle":"none");this.setShape(this.shape);this.setSize(size)}setShape(shape){if(!this.draws[shape]){shape="none"}this.draw=this.draws[shape];this.shape=shape}getShape=_=>this.shape;setSize(size){this.size=size}getSize=_=>this.size;setJson(json){this.setSize(json.size);this.setShape(json.style)}getJson=_=>({size:this.getSize(),style:this.getShape()})}