import Handler from"/sfview/js/anno/Handler.js";import Anno from"/sfview/js/anno/Anno.js";import Tracker from"/sfview/js/anno/Tracker.js";export default class SelectHandler extends Handler{x;y;width;height;constructor(){super("pointer")}draw(ctx){ctx.beginPath();ctx.fillStyle="#80808080";ctx.fillRect(this.x,this.y,this.width,this.height);ctx.fill()}initStep(x,y,shiftKey){const handler=Anno.getHandler(x,y);if(handler){Anno.curHandler=handler;handler.initStep(x,y,shiftKey)}else{this.x=x;this.y=y;this.width=0;this.height=0;if(!shiftKey){Anno.shapes.unselectAll();Anno.drawShapes()}}}calcStep(shape,x,y){this.width=x-this.x;this.height=y-this.y;Anno.drawShapes();this.redraw()}endStep(){if(this.width<0){this.x+=this.width;this.width*=-1}if(this.height<0){this.y+=this.height;this.height*=-1}Anno.shapes.forEach((shape=>{if(shape.contained(this.x,this.y,this.x+this.width,this.y+this.height)){shape.selected=true}}))}}